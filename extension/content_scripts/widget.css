/* TubeSumTalk Widget Styles */

.tubesumtalk-widget {
    width: 100%;
    margin-bottom: 16px;
    background-color: var(--yt-spec-base-background, #fff);
    color: var(--yt-spec-text-primary, #0f0f0f);
    border-radius: 12px;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
    font-family: "Roboto", "Arial", sans-serif;
    overflow: hidden;
    transition: all 0.3s ease;
    border: 1px solid var(--yt-spec-10-percent-layer, #e5e5e5);
}

.tubesumtalk-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    border-bottom: 1px solid var(--yt-spec-10-percent-layer, #e5e5e5);
    background-color: var(--yt-spec-brand-background-primary, #fff);
}

.tubesumtalk-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 500;
    color: var(--yt-spec-text-primary, #0f0f0f);
    display: flex;
    align-items: center;
    gap: 8px;
}

.tubesumtalk-header h3 img {
    width: 24px;
    height: 24px;
}

.tubesumtalk-toggle {
    background: none;
    border: none;
    color: var(--yt-spec-text-primary, #0f0f0f);
    font-size: 20px;
    cursor: pointer;
    padding: 4px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
}

.tubesumtalk-toggle:hover {
    background-color: var(--yt-spec-10-percent-layer, rgba(0, 0, 0, 0.05));
}

.tubesumtalk-content {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
    max-height: 600px;
    overflow-y: auto;
    transition: max-height 0.3s ease, padding 0.3s ease;
}

.tubesumtalk-collapsed .tubesumtalk-content {
    max-height: 0;
    padding: 0 16px;
    overflow: hidden;
}

.tubesumtalk-summary-container {
    background-color: var(--yt-spec-brand-background-solid, #f9f9f9);
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 16px;
    max-height: 300px;
    overflow-y: auto;
    scrollbar-width: thin;
}

/* Custom scrollbar styling */
.tubesumtalk-summary-container::-webkit-scrollbar {
    width: 6px;
}

.tubesumtalk-summary-container::-webkit-scrollbar-track {
    background: transparent;
}

.tubesumtalk-summary-container::-webkit-scrollbar-thumb {
    background-color: var(--yt-spec-10-percent-layer, rgba(0, 0, 0, 0.2));
    border-radius: 3px;
}

html[dark] .tubesumtalk-summary-container::-webkit-scrollbar-thumb {
    background-color: var(--yt-spec-10-percent-layer, rgba(255, 255, 255, 0.2));
}

.tubesumtalk-summary {
    line-height: 1.6;
    font-size: 14px;
    color: var(--yt-spec-text-primary, #0f0f0f);
}

/* Markdown styling */
.tubesumtalk-summary ul,
.tubesumtalk-summary ol {
    padding-left: 20px;
    margin: 8px 0;
}

.tubesumtalk-summary li {
    margin-bottom: 4px;
}

.tubesumtalk-summary h1,
.tubesumtalk-summary h2,
.tubesumtalk-summary h3,
.tubesumtalk-summary h4,
.tubesumtalk-summary h5,
.tubesumtalk-summary h6 {
    margin: 16px 0 8px 0;
    font-weight: 500;
}

.tubesumtalk-summary h1 {
    font-size: 18px;
}
.tubesumtalk-summary h2 {
    font-size: 16px;
}
.tubesumtalk-summary h3 {
    font-size: 15px;
}
.tubesumtalk-summary h4,
.tubesumtalk-summary h5,
.tubesumtalk-summary h6 {
    font-size: 14px;
}

.tubesumtalk-summary p {
    margin: 8px 0;
}

.tubesumtalk-summary a {
    color: var(--yt-spec-brand-button-background, #065fd4);
    text-decoration: none;
}

.tubesumtalk-summary a:hover {
    text-decoration: underline;
}

.tubesumtalk-summary strong {
    font-weight: 600;
}

.tubesumtalk-summary em {
    font-style: italic;
}

.tubesumtalk-word {
    display: inline;
}

.tubesumtalk-highlighted {
    background-color: var(--yt-spec-brand-button-background, #065fd4);
    color: white;
    border-radius: 3px;
    padding: 0 2px;
}

.tubesumtalk-controls {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 0;
    border-top: 1px solid var(--yt-spec-10-percent-layer, #e5e5e5);
}

.tubesumtalk-play-pause {
    background-color: var(--yt-spec-brand-button-background, #065fd4);
    color: white;
    border: none;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.tubesumtalk-play-pause:hover {
    background-color: var(--yt-spec-brand-button-background-hover, #0b57d0);
}

.tubesumtalk-voice-select {
    flex: 1;
    padding: 8px;
    border-radius: 4px;
    border: 1px solid var(--yt-spec-10-percent-layer, #e5e5e5);
    background-color: var(--yt-spec-base-background, #fff);
    color: var(--yt-spec-text-primary, #0f0f0f);
    font-size: 14px;
}

.tubesumtalk-speed-container {
    display: flex;
    align-items: center;
    gap: 8px;
}

.tubesumtalk-speed-slider {
    width: 80px;
    margin: 0;
}

.tubesumtalk-speed-value {
    font-size: 14px;
    min-width: 36px;
    text-align: center;
}

.tubesumtalk-settings {
    background: none;
    border: none;
    color: var(--yt-spec-text-primary, #0f0f0f);
    font-size: 20px;
    cursor: pointer;
    padding: 4px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
}

.tubesumtalk-settings:hover {
    background-color: var(--yt-spec-10-percent-layer, rgba(0, 0, 0, 0.05));
}

.tubesumtalk-error {
    color: #cc0000;
    padding: 12px;
    border: 1px solid #cc0000;
    border-radius: 4px;
    background-color: rgba(204, 0, 0, 0.05);
    font-size: 14px;
}

.tubesumtalk-error-icon {
    font-size: 24px;
    margin-bottom: 8px;
    text-align: center;
}

/* Tabs */
.tubesumtalk-tabs {
    display: flex;
    border-bottom: 1px solid var(--yt-spec-10-percent-layer, #e5e5e5);
    margin-bottom: 16px;
}

.tubesumtalk-tab {
    padding: 8px 16px;
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    color: var(--yt-spec-text-secondary, #606060);
}

.tubesumtalk-tab:hover {
    color: var(--yt-spec-text-primary, #0f0f0f);
}

.tubesumtalk-tab-active {
    color: var(--yt-spec-brand-button-background, #065fd4);
    border-bottom-color: var(--yt-spec-brand-button-background, #065fd4);
}

/* Panels */
.tubesumtalk-panel {
    display: none;
    flex-direction: column;
    flex: 1;
}

.tubesumtalk-panel-active {
    display: flex;
}

/* Summary options */
.tubesumtalk-summary-options {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 16px;
}

.tubesumtalk-select-group {
    display: flex;
    flex-direction: column;
    gap: 4px;
    flex: 1;
    min-width: 100px;
}

.tubesumtalk-select-group label {
    font-size: 12px;
    color: var(--yt-spec-text-secondary, #606060);
}

.tubesumtalk-select-group select {
    padding: 6px 8px;
    border-radius: 4px;
    border: 1px solid var(--yt-spec-10-percent-layer, #e5e5e5);
    background-color: var(--yt-spec-base-background, #fff);
    color: var(--yt-spec-text-primary, #0f0f0f);
    font-size: 14px;
}

.tubesumtalk-button-group {
    display: flex;
    align-items: center;
    gap: 8px;
    align-self: flex-end;
}

.tubesumtalk-button {
    background-color: var(--yt-spec-brand-button-background, #065fd4);
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
    font-size: 14px;
}

.tubesumtalk-button:hover {
    background-color: var(--yt-spec-brand-button-background-hover, #0b57d0);
}

/* Q&A styles */
.tubesumtalk-qa-form {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 16px;
}

.tubesumtalk-qa-form textarea {
    padding: 12px;
    border-radius: 4px;
    border: 1px solid var(--yt-spec-10-percent-layer, #e5e5e5);
    background-color: var(--yt-spec-base-background, #fff);
    color: var(--yt-spec-text-primary, #0f0f0f);
    font-size: 14px;
    resize: vertical;
    min-height: 80px;
    font-family: "Roboto", "Arial", sans-serif;
}

.tubesumtalk-qa-form button {
    align-self: flex-end;
}

.tubesumtalk-qa-container {
    flex: 1;
    overflow-y: auto;
    background-color: var(--yt-spec-brand-background-solid, #f9f9f9);
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 16px;
    max-height: 300px;
}

.tubesumtalk-answer {
    line-height: 1.6;
    font-size: 14px;
    color: var(--yt-spec-text-primary, #0f0f0f);
}

.tubesumtalk-placeholder {
    color: var(--yt-spec-text-secondary, #606060);
    font-style: italic;
    text-align: center;
    padding: 24px 0;
}

/* Settings panel */
.tubesumtalk-settings-group {
    margin-bottom: 24px;
}

.tubesumtalk-settings-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    font-size: 14px;
}

.tubesumtalk-api-key-input {
    display: flex;
    position: relative;
}

.tubesumtalk-api-key-input input {
    flex: 1;
    padding: 8px 40px 8px 12px;
    border-radius: 4px;
    border: 1px solid var(--yt-spec-10-percent-layer, #e5e5e5);
    background-color: var(--yt-spec-base-background, #fff);
    color: var(--yt-spec-text-primary, #0f0f0f);
    font-size: 14px;
}

.tubesumtalk-icon-button {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 16px;
    padding: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    color: var(--yt-spec-text-primary, #0f0f0f);
}

.tubesumtalk-icon-button:hover {
    background-color: var(--yt-spec-10-percent-layer, rgba(0, 0, 0, 0.05));
}

.tubesumtalk-api-key-input .tubesumtalk-icon-button {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
}

.tubesumtalk-help-text {
    font-size: 12px;
    color: var(--yt-spec-text-secondary, #606060);
    margin-top: 4px;
}

.tubesumtalk-help-text a {
    color: var(--yt-spec-brand-button-background, #065fd4);
    text-decoration: none;
}

.tubesumtalk-help-text a:hover {
    text-decoration: underline;
}

.tubesumtalk-range-group {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 4px;
}

.tubesumtalk-range-group input {
    flex: 1;
}

.tubesumtalk-settings-actions {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: 24px;
}

.tubesumtalk-settings-status {
    font-size: 14px;
}

.tubesumtalk-success {
    color: #34a853;
}

.tubesumtalk-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 16px;
    padding: 24px 0;
    position: relative;
}

.tubesumtalk-spinner-container {
    position: relative;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.tubesumtalk-spinner {
    width: 40px;
    height: 40px;
    border: 4px solid rgba(0, 0, 0, 0.1);
    border-radius: 50%;
    border-top-color: var(--yt-spec-brand-button-background, #065fd4);
    animation: tubesumtalk-spin 1s linear infinite;
}

.tubesumtalk-timer {
    position: absolute;
    font-size: 12px;
    font-weight: 500;
    color: var(--yt-spec-text-primary, #0f0f0f);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
}

.tubesumtalk-loading-text {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.tubesumtalk-loading-message {
    font-size: 14px;
    color: var(--yt-spec-text-primary, #0f0f0f);
}

.tubesumtalk-loading-estimate {
    font-size: 12px;
    color: var(--yt-spec-text-secondary, #606060);
    font-style: italic;
}

.tubesumtalk-cancel-button {
    background-color: var(--yt-spec-10-percent-layer, #e5e5e5);
    color: var(--yt-spec-text-primary, #0f0f0f);
    border: none;
    padding: 6px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    margin-top: 8px;
    display: flex;
    align-items: center;
    gap: 4px;
}

.tubesumtalk-cancel-button:hover {
    background-color: var(--yt-spec-15-percent-layer, #d9d9d9);
}

.tubesumtalk-pulse {
    animation: tubesumtalk-pulse 2s infinite;
}

@keyframes tubesumtalk-spin {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

@keyframes tubesumtalk-pulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
    100% {
        transform: scale(1);
    }
}

/* Dark mode support for loading elements */
html[dark] .tubesumtalk-spinner,
.tubesumtalk-dark-theme .tubesumtalk-spinner {
    border-color: rgba(255, 255, 255, 0.1);
    border-top-color: var(--yt-spec-brand-button-background, #065fd4);
}

html[dark] .tubesumtalk-timer,
.tubesumtalk-dark-theme .tubesumtalk-timer {
    color: var(--yt-spec-text-primary, #fff);
}

html[dark] .tubesumtalk-loading-message,
.tubesumtalk-dark-theme .tubesumtalk-loading-message {
    color: var(--yt-spec-text-primary, #fff);
}

html[dark] .tubesumtalk-loading-estimate,
.tubesumtalk-dark-theme .tubesumtalk-loading-estimate {
    color: var(--yt-spec-text-secondary, #aaa);
}

html[dark] .tubesumtalk-cancel-button,
.tubesumtalk-dark-theme .tubesumtalk-cancel-button {
    background-color: var(--yt-spec-10-percent-layer, #333);
    color: var(--yt-spec-text-primary, #fff);
}

html[dark] .tubesumtalk-cancel-button:hover,
.tubesumtalk-dark-theme .tubesumtalk-cancel-button:hover {
    background-color: var(--yt-spec-15-percent-layer, #444);
}

.tubesumtalk-settings-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 3000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.tubesumtalk-settings-content {
    background-color: var(--yt-spec-base-background, #fff);
    color: var(--yt-spec-text-primary, #0f0f0f);
    padding: 24px;
    border-radius: 8px;
    width: 320px;
    max-width: 90%;
}

.tubesumtalk-settings-content h3 {
    margin-top: 0;
    margin-bottom: 16px;
    font-size: 18px;
    font-weight: 500;
}

.tubesumtalk-setting {
    margin-bottom: 16px;
}

.tubesumtalk-setting label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
}

.tubesumtalk-setting-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    margin-top: 24px;
}

.tubesumtalk-save {
    background-color: var(--yt-spec-brand-button-background, #065fd4);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
}

.tubesumtalk-save:hover {
    background-color: var(--yt-spec-brand-button-background-hover, #0b57d0);
}

.tubesumtalk-cancel {
    background-color: var(--yt-spec-10-percent-layer, #e5e5e5);
    color: var(--yt-spec-text-primary, #0f0f0f);
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
}

.tubesumtalk-cancel:hover {
    background-color: var(--yt-spec-15-percent-layer, #d9d9d9);
}

/* Dark mode support */
html[dark] .tubesumtalk-widget,
.tubesumtalk-dark-theme {
    background-color: var(--yt-spec-base-background, #0f0f0f);
    color: var(--yt-spec-text-primary, #fff);
    border-color: var(--yt-spec-10-percent-layer, #333);
}

html[dark] .tubesumtalk-header,
.tubesumtalk-dark-theme .tubesumtalk-header {
    background-color: var(--yt-spec-brand-background-primary, #0f0f0f);
    border-bottom-color: var(--yt-spec-10-percent-layer, #333);
}

html[dark] .tubesumtalk-summary-container,
.tubesumtalk-dark-theme .tubesumtalk-summary-container {
    background-color: var(--yt-spec-brand-background-solid, #212121);
}

html[dark] .tubesumtalk-controls,
.tubesumtalk-dark-theme .tubesumtalk-controls {
    border-top-color: var(--yt-spec-10-percent-layer, #333);
}

html[dark] .tubesumtalk-voice-select,
html[dark] .tubesumtalk-select-group select,
html[dark] .tubesumtalk-qa-form textarea,
html[dark] .tubesumtalk-api-key-input input,
.tubesumtalk-dark-theme .tubesumtalk-voice-select,
.tubesumtalk-dark-theme .tubesumtalk-select-group select,
.tubesumtalk-dark-theme .tubesumtalk-qa-form textarea,
.tubesumtalk-dark-theme .tubesumtalk-api-key-input input {
    background-color: var(--yt-spec-base-background, #0f0f0f);
    border-color: var(--yt-spec-10-percent-layer, #333);
    color: var(--yt-spec-text-primary, #fff);
}

html[dark] .tubesumtalk-icon-button,
.tubesumtalk-dark-theme .tubesumtalk-icon-button {
    color: var(--yt-spec-text-primary, #fff);
}

html[dark] .tubesumtalk-icon-button:hover,
.tubesumtalk-dark-theme .tubesumtalk-icon-button:hover {
    background-color: var(--yt-spec-10-percent-layer, rgba(255, 255, 255, 0.1));
}

html[dark] .tubesumtalk-settings-content,
.tubesumtalk-dark-theme .tubesumtalk-settings-content {
    background-color: var(--yt-spec-base-background, #0f0f0f);
}

html[dark] .tubesumtalk-cancel,
.tubesumtalk-dark-theme .tubesumtalk-cancel {
    background-color: var(--yt-spec-10-percent-layer, #333);
}

html[dark] .tubesumtalk-cancel:hover,
.tubesumtalk-dark-theme .tubesumtalk-cancel:hover {
    background-color: var(--yt-spec-15-percent-layer, #444);
}

html[dark] .tubesumtalk-tabs,
.tubesumtalk-dark-theme .tubesumtalk-tabs {
    border-bottom-color: var(--yt-spec-10-percent-layer, #333);
}

html[dark] .tubesumtalk-tab:not(.tubesumtalk-tab-active),
.tubesumtalk-dark-theme .tubesumtalk-tab:not(.tubesumtalk-tab-active) {
    color: var(--yt-spec-text-secondary, #aaa);
}

html[dark] .tubesumtalk-tab:hover:not(.tubesumtalk-tab-active),
.tubesumtalk-dark-theme .tubesumtalk-tab:hover:not(.tubesumtalk-tab-active) {
    color: var(--yt-spec-text-primary, #fff);
}

html[dark] .tubesumtalk-placeholder,
.tubesumtalk-dark-theme .tubesumtalk-placeholder {
    color: var(--yt-spec-text-secondary, #aaa);
}

html[dark] .tubesumtalk-help-text,
.tubesumtalk-dark-theme .tubesumtalk-help-text {
    color: var(--yt-spec-text-secondary, #aaa);
}

html[dark] .tubesumtalk-select-group label,
.tubesumtalk-dark-theme .tubesumtalk-select-group label {
    color: var(--yt-spec-text-secondary, #aaa);
}

html[dark] .tubesumtalk-qa-container,
.tubesumtalk-dark-theme .tubesumtalk-qa-container {
    background-color: var(--yt-spec-brand-background-solid, #212121);
}
